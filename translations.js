// Translation data for guides.html and reviews.html
const translations = {
    ar: {
        // Guides page translations
        guides: {
            title: "دليل الألعاب المجانية",
            description: "اكتشف عالم الألعاب المجانية من خلال دليلنا الشامل. نصائح، استراتيجيات، وأفضل الممارسات للاستمتاع بالألعاب المجانية.",
            howToChooseTitle: "كيفية اختيار الألعاب المناسبة",
            howToChooseContent: "اختيار اللعبة المناسبة أمر مهم للاستمتاع بالتجربة. إليك بعض النصائح:",
            howToChooseTips: [
                "حدد نوع الألعاب المفضل: هل تفضل ألعاب الحركة أم الاستراتيجية؟",
                "تحقق من متطلبات النظام: تأكد من توافق اللعبة مع جهازك",
                "اقرأ المراجعات: استفد من تجارب اللاعبين الآخرين",
                "جرب النسخ التجريبية: اختبر اللعبة قبل التحميل الكامل"
            ],
            quickTips: "نصائح سريعة:",
            quickTipsList: [
                "ابدأ بالألعاب البسيطة إذا كنت مبتدئاً",
                "انضم لمجتمعات اللاعبين للحصول على المساعدة",
                "لا تتردد في تجربة أنواع جديدة من الألعاب"
            ],
            performanceTitle: "تحسين أداء الألعاب",
            performanceContent: "لتحسين أداء الألعاب على جهازك، اتبع هذه الخطوات:",
            performanceSteps: [
                "إغلاق البرامج غير الضرورية: حرر ذاكرة النظام",
                "تحديث تعريفات الرسومات: احصل على أحدث الإصدارات",
                "ضبط إعدادات الرسومات: اخفض الدقة للحصول على أداء أفضل",
                "تنظيف القرص الصلب: احرر مساحة إضافية"
            ],
            importantSettings: "إعدادات مهمة:",
            importantSettingsList: [
                "إغلاق V-Sync لتحسين الأداء",
                "تقليل جودة الظلال والانعكاسات",
                "إغلاق التأثيرات البصرية غير الضرورية"
            ],
            beginnerGamesTitle: "أفضل الألعاب للمبتدئين",
            beginnerGamesContent: "إذا كنت جديداً في عالم الألعاب، إليك بعض التوصيات:",
            adventureGames: "ألعاب المغامرة:",
            adventureGamesList: [
                "Portal - لعبة ألغاز ممتعة",
                "Stardew Valley - محاكاة مزرعة هادئة",
                "Undertale - قصة تفاعلية رائعة"
            ],
            strategyGames: "ألعاب الاستراتيجية:",
            strategyGamesList: [
                "Civilization VI - استراتيجية شاملة",
                "XCOM 2 - تكتيكات عسكرية",
                "Into the Breach - ألغاز استراتيجية"
            ],
            advancedStrategiesTitle: "استراتيجيات اللعب المتقدم",
            advancedStrategiesContent: "لتحسين مهاراتك في الألعاب، اتبع هذه الاستراتيجيات:",
            skillImprovement: "تحسين المهارات:",
            skillImprovementList: [
                "التدريب المنتظم: خصص وقتاً يومياً للتدريب",
                "تحليل الأخطاء: تعلم من أخطائك",
                "مشاهدة المحترفين: استفد من تجارب اللاعبين المحترفين",
                "التواصل مع المجتمع: انضم لمجموعات اللاعبين"
            ],
            competitionTips: "نصائح للتنافس:",
            competitionTipsList: [
                "حافظ على هدوئك تحت الضغط",
                "تعلم من كل مباراة",
                "طور استراتيجياتك باستمرار",
                "كن رياضياً في الفوز والخسارة"
            ],
            usefulResources: "موارد مفيدة",
            gameGuides: "أدلة الألعاب",
            gameGuidesDesc: "مجموعة شاملة من الأدلة والاستراتيجيات لأشهر الألعاب المجانية",
            exploreGuides: "استكشف الأدلة",
            tutorialVideos: "فيديوهات تعليمية",
            tutorialVideosDesc: "مقاطع فيديو تعليمية تغطي أساسيات اللعب والتقنيات المتقدمة",
            watchVideos: "شاهد الفيديوهات",
            playerCommunity: "مجتمع اللاعبين",
            playerCommunityDesc: "انضم لمجتمعنا النشط وشارك تجاربك مع لاعبين آخرين",
            joinCommunity: "انضم للمجتمع",
            gameStats: "إحصائيات الألعاب",
            gameStatsDesc: "إحصائيات مفصلة عن الألعاب الأكثر شعبية والتوجهات الحالية",
            viewStats: "عرض الإحصائيات"
        },
        // Reviews page translations
        reviews: {
            title: "مراجعات الألعاب المجانية",
            description: "اكتشف أفضل الألعاب المجانية من خلال مراجعات شاملة ومفصلة. نحن نختبر كل لعبة بعناية لنقدم لك التوصيات الأفضل.",
            featuredReviews: "أفضل المراجعات",
            pros: "المميزات:",
            cons: "العيوب:",
            recommendation: "التوصية:",
            playNow: "العب الآن",
            reviewCategories: "تصنيفات المراجعات",
            actionGames: "ألعاب الحركة",
            actionGamesDesc: "مراجعات لأفضل ألعاب الحركة والقتال المجانية",
            actionGamesCount: "15 مراجعة",
            strategyGames: "ألعاب الاستراتيجية",
            strategyGamesDesc: "تحليل شامل لألعاب الاستراتيجية والتخطيط",
            strategyGamesCount: "12 مراجعة",
            adventureGames: "ألعاب المغامرة",
            adventureGamesDesc: "اكتشف عوالم جديدة مع ألعاب المغامرة",
            adventureGamesCount: "8 مراجعات",
            sportsGames: "ألعاب الرياضة",
            sportsGamesDesc: "أفضل ألعاب الرياضة والمنافسة",
            sportsGamesCount: "10 مراجعات"
        },
        // Common translations
        common: {
            home: "الرئيسية",
            reviews: "المراجعات",
            guides: "الدليل",
            about: "عن الموقع",
            footerSubtitle: "دليل الألعاب المجانية",
            footerCopyright: "جميع الحقوق محفوظة © 2024 | Games100",
            footerDescription: "دليل شامل للألعاب المجانية ونصائح مفيدة للاعبين"
        },
        // About page translations
        about: {
            title: "عن الموقع",
            subtitle: "تعرف على قصة Games100 ورؤيتنا للمستقبل",
            mission: "مهمتنا",
            missionText: "نهدف إلى تجميع أفضل الألعاب المجانية والعروض من جميع المتاجر العالمية في مكان واحد، لنوفر على اللاعبين عناء البحث في مواقع متعددة.",
            vision: "رؤيتنا",
            visionText: "أن نكون المصدر الأول والأكثر موثوقية للألعاب المجانية في العالم العربي، مع دعم كامل للغة العربية والإنجليزية.",
            whatMakesUsSpecial: "ما يميزنا",
            features: [
                "تحديث يومي للألعاب والعروض",
                "دعم أكثر من 6 متاجر عالمية",
                "واجهة عربية وإنجليزية بالكامل",
                "تصميم متجاوب لجميع الأجهزة",
                "مجاني 100% بدون إعلانات مزعجة"
            ],
            ourJourney: "رحلتنا",
            websiteLaunch: "إطلاق الموقع",
            websiteLaunchText: "بدأنا بفكرة بسيطة: تجميع الألعاب المجانية في مكان واحد",
            future: "المستقبل",
            plannedExpansions: "توسعات مخططة",
            plannedExpansionsText: "إضافة المزيد من المتاجر والميزات المتقدمة",
            ourStatistics: "إحصائياتنا",
            supportedStores: "متاجر مدعومة",
            free: "مجاني",
            continuousUpdates: "تحديث مستمر",
            supportedLanguages: "لغات مدعومة",
            siteInformation: "معلومات الموقع",
            privacyPolicy: "سياسة الخصوصية",
            termsOfUse: "شروط الاستخدام",
            contactUs: "تمويل بنا",
            sitemap: "خريطة الموقع",
            supportedStoresTitle: "المتاجر المدعومة",
            siteStatistics: "إحصائيات الموقع",
            stores: "متاجر",
            updates: "تحديث",
            footerSubtitle: "الألعاب مجانية 100%",
            footerDescription: "موقع متخصص في عرض الألعاب المجانية من جميع المتاجر العالمية"
        }
    },
    en: {
        // Guides page translations
        guides: {
            title: "Free Games Guide",
            description: "Discover the world of free games through our comprehensive guide. Tips, strategies, and best practices for enjoying free games.",
            howToChooseTitle: "How to Choose the Right Games",
            howToChooseContent: "Choosing the right game is important for enjoying the experience. Here are some tips:",
            howToChooseTips: [
                "Identify your preferred game genre: Do you prefer action or strategy games?",
                "Check system requirements: Make sure the game is compatible with your device",
                "Read reviews: Benefit from other players' experiences",
                "Try demo versions: Test the game before full download"
            ],
            quickTips: "Quick Tips:",
            quickTipsList: [
                "Start with simple games if you're a beginner",
                "Join player communities for help",
                "Don't hesitate to try new game genres"
            ],
            performanceTitle: "Improving Game Performance",
            performanceContent: "To improve game performance on your device, follow these steps:",
            performanceSteps: [
                "Close unnecessary programs: Free up system memory",
                "Update graphics drivers: Get the latest versions",
                "Adjust graphics settings: Lower resolution for better performance",
                "Clean hard disk: Free up additional space"
            ],
            importantSettings: "Important Settings:",
            importantSettingsList: [
                "Turn off V-Sync for better performance",
                "Reduce shadow and reflection quality",
                "Turn off unnecessary visual effects"
            ],
            beginnerGamesTitle: "Best Games for Beginners",
            beginnerGamesContent: "If you're new to gaming, here are some recommendations:",
            adventureGames: "Adventure Games:",
            adventureGamesList: [
                "Portal - Fun puzzle game",
                "Stardew Valley - Peaceful farm simulation",
                "Undertale - Great interactive story"
            ],
            strategyGames: "Strategy Games:",
            strategyGamesList: [
                "Civilization VI - Comprehensive strategy",
                "XCOM 2 - Military tactics",
                "Into the Breach - Strategic puzzles"
            ],
            advancedStrategiesTitle: "Advanced Gaming Strategies",
            advancedStrategiesContent: "To improve your gaming skills, follow these strategies:",
            skillImprovement: "Skill Improvement:",
            skillImprovementList: [
                "Regular training: Dedicate daily time for practice",
                "Error analysis: Learn from your mistakes",
                "Watch professionals: Benefit from pro players' experiences",
                "Community engagement: Join player groups"
            ],
            competitionTips: "Competition Tips:",
            competitionTipsList: [
                "Stay calm under pressure",
                "Learn from every match",
                "Continuously develop your strategies",
                "Be sportsmanlike in victory and defeat"
            ],
            usefulResources: "Useful Resources",
            gameGuides: "Game Guides",
            gameGuidesDesc: "Comprehensive collection of guides and strategies for popular free games",
            exploreGuides: "Explore Guides",
            tutorialVideos: "Tutorial Videos",
            tutorialVideosDesc: "Educational videos covering gaming basics and advanced techniques",
            watchVideos: "Watch Videos",
            playerCommunity: "Player Community",
            playerCommunityDesc: "Join our active community and share your experiences with other players",
            joinCommunity: "Join Community",
            gameStats: "Game Statistics",
            gameStatsDesc: "Detailed statistics about the most popular games and current trends",
            viewStats: "View Statistics"
        },
        // Reviews page translations
        reviews: {
            title: "Free Game Reviews",
            description: "Discover the best free games through comprehensive and detailed reviews. We carefully test each game to provide you with the best recommendations.",
            featuredReviews: "Featured Reviews",
            pros: "Pros:",
            cons: "Cons:",
            recommendation: "Recommendation:",
            playNow: "Play Now",
            reviewCategories: "Review Categories",
            actionGames: "Action Games",
            actionGamesDesc: "Reviews of the best free action and fighting games",
            actionGamesCount: "15 reviews",
            strategyGames: "Strategy Games",
            strategyGamesDesc: "Comprehensive analysis of strategy and planning games",
            strategyGamesCount: "12 reviews",
            adventureGames: "Adventure Games",
            adventureGamesDesc: "Discover new worlds with adventure games",
            adventureGamesCount: "8 reviews",
            sportsGames: "Sports Games",
            sportsGamesDesc: "Best sports and competition games",
            sportsGamesCount: "10 reviews"
        },
        // Common translations
        common: {
            home: "Home",
            reviews: "Reviews",
            guides: "Guides",
            about: "About",
            footerSubtitle: "Free Games Guide",
            footerCopyright: "All rights reserved © 2024 | Games100",
            footerDescription: "Comprehensive guide for free games and useful tips for players"
        },
        // About page translations
        about: {
            title: "About Us",
            subtitle: "Learn about Games100 story and our vision for the future",
            mission: "Our Mission",
            missionText: "We aim to gather the best free games and offers from all major gaming stores in one place, saving gamers the hassle of searching multiple websites.",
            vision: "Our Vision",
            visionText: "To be the first and most reliable source for free games in the Arab world, with full support for Arabic and English languages.",
            whatMakesUsSpecial: "What Makes Us Special",
            features: [
                "Daily updates for games and offers",
                "Support for more than 6 global stores",
                "Complete Arabic and English interface",
                "Responsive design for all devices",
                "100% free without annoying ads"
            ],
            ourJourney: "Our Journey",
            websiteLaunch: "Website Launch",
            websiteLaunchText: "We started with a simple idea: gathering free games in one place",
            future: "Future",
            plannedExpansions: "Planned Expansions",
            plannedExpansionsText: "Adding more stores and advanced features",
            ourStatistics: "Our Statistics",
            supportedStores: "Supported Stores",
            free: "Free",
            continuousUpdates: "Continuous Updates",
            supportedLanguages: "Supported Languages",
            siteInformation: "Site Information",
            privacyPolicy: "Privacy Policy",
            termsOfUse: "Terms of Use",
            contactUs: "Contact Us",
            sitemap: "Sitemap",
            supportedStoresTitle: "Supported Stores",
            siteStatistics: "Site Statistics",
            stores: "Stores",
            updates: "Updates",
            footerSubtitle: "100% Free Games",
            footerDescription: "Specialized website for displaying free games from all major gaming stores"
        }
    }
};

// Language switching function
function switchLanguage(lang) {
    const currentLang = lang || 'ar';
    const t = translations[currentLang];
    
    // Update page direction and language
    document.documentElement.lang = currentLang;
    document.documentElement.dir = currentLang === 'ar' ? 'rtl' : 'ltr';
    document.body.dir = currentLang === 'ar' ? 'rtl' : 'ltr';
    
    // Update page title and meta tags
    updatePageMeta(currentLang);
    
    // Update navigation links
    updateNavigationLinks(t.common);
    
    // Update page-specific content with animation
    setTimeout(() => {
        if (window.location.pathname.includes('guides.html')) {
            updateGuidesContent(t.guides);
        } else if (window.location.pathname.includes('reviews.html')) {
            updateReviewsContent(t.reviews);
        } else if (window.location.pathname.includes('test-language.html')) {
            updateTestPageContent(currentLang);
        } else if (window.location.pathname.includes('about.html')) {
            updateAboutContent(t.about);
        }
    }, 100);
    
    // Update footer
    updateFooter(t.common);
    
    // Update language button
    updateLanguageButton(currentLang);
    
    // Update CSS classes for RTL/LTR
    updatePageDirection(currentLang);
    
    // Show success notification
    showLanguageChangeNotification(currentLang);
    
    // Add content update animation class
    const mainContent = document.querySelector('main');
    if (mainContent) {
        mainContent.classList.add('content-update');
        setTimeout(() => {
            mainContent.classList.remove('content-update');
        }, 500);
    }
}

// Update navigation links
function updateNavigationLinks(common) {
    const navLinks = document.querySelectorAll('.header-nav .nav-link');
    navLinks.forEach(link => {
        const href = link.getAttribute('href');
        if (href) {
            switch (href) {
                case 'index.html':
                    link.textContent = common.home;
                    break;
                case 'reviews.html':
                    link.textContent = common.reviews;
                    break;
                case 'guides.html':
                    link.textContent = common.guides;
                    break;
                case 'about.html':
                    link.textContent = common.about;
                    break;
                case 'test-language.html':
                    // Keep test page link as is
                    break;
            }
        }
    });
}

// Update guides page content
function updateGuidesContent(guides) {
    // Update hero section
    const heroTitle = document.querySelector('.hero-title');
    if (heroTitle) {
        heroTitle.textContent = guides.title;
        heroTitle.style.transition = 'all 0.3s ease';
    }
    
    const heroDescription = document.querySelector('.hero-description');
    if (heroDescription) {
        heroDescription.textContent = guides.description;
        heroDescription.style.transition = 'all 0.3s ease';
    }
    
    // Update guide cards with animation
    const guideCards = document.querySelectorAll('.guide-card');
    guideCards.forEach((card, index) => {
        const title = card.querySelector('.guide-title');
        const content = card.querySelector('.guide-content');
        
        // Add fade effect
        card.style.opacity = '0.7';
        card.style.transform = 'translateY(10px)';
        
        setTimeout(() => {
            card.style.opacity = '1';
            card.style.transform = 'translateY(0)';
        }, index * 100);
        
        if (index === 0) { // How to choose games
            if (title) title.textContent = guides.howToChooseTitle;
            if (content) {
                const p = content.querySelector('p');
                if (p) p.textContent = guides.howToChooseContent;
                
                const tips = content.querySelectorAll('ul li');
                guides.howToChooseTips.forEach((tip, i) => {
                    if (tips[i]) tips[i].innerHTML = tip;
                });
                
                const quickTipsTitle = content.querySelector('.guide-tips h3');
                if (quickTipsTitle) quickTipsTitle.textContent = guides.quickTips;
                
                const quickTipsList = content.querySelectorAll('.guide-tips ul li');
                guides.quickTipsList.forEach((tip, i) => {
                    if (quickTipsList[i]) quickTipsList[i].textContent = tip;
                });
            }
        } else if (index === 1) { // Performance
            if (title) title.textContent = guides.performanceTitle;
            if (content) {
                const p = content.querySelector('p');
                if (p) p.textContent = guides.performanceContent;
                
                const steps = content.querySelectorAll('ol li');
                guides.performanceSteps.forEach((step, i) => {
                    if (steps[i]) steps[i].innerHTML = step;
                });
                
                const settingsTitle = content.querySelector('.guide-tips h3');
                if (settingsTitle) settingsTitle.textContent = guides.importantSettings;
                
                const settingsList = content.querySelectorAll('.guide-tips ul li');
                guides.importantSettingsList.forEach((setting, i) => {
                    if (settingsList[i]) settingsList[i].textContent = setting;
                });
            }
        } else if (index === 2) { // Beginner games
            if (title) title.textContent = guides.beginnerGamesTitle;
            if (content) {
                const p = content.querySelector('p');
                if (p) p.textContent = guides.beginnerGamesContent;
                
                const adventureTitle = content.querySelector('.game-category h3');
                if (adventureTitle) adventureTitle.textContent = guides.adventureGames;
                
                const adventureList = content.querySelectorAll('.game-category ul li');
                guides.adventureGamesList.forEach((game, i) => {
                    if (adventureList[i]) adventureList[i].textContent = game;
                });
                
                const strategyTitle = content.querySelectorAll('.game-category h3')[1];
                if (strategyTitle) strategyTitle.textContent = guides.strategyGames;
                
                const strategyList = content.querySelectorAll('.game-category ul li');
                guides.strategyGamesList.forEach((game, i) => {
                    if (strategyList[i + 3]) strategyList[i + 3].textContent = game;
                });
            }
        } else if (index === 3) { // Advanced strategies
            if (title) title.textContent = guides.advancedStrategiesTitle;
            if (content) {
                const p = content.querySelector('p');
                if (p) p.textContent = guides.advancedStrategiesContent;
                
                const skillTitle = content.querySelector('.strategy-section h3');
                if (skillTitle) skillTitle.textContent = guides.skillImprovement;
                
                const skillList = content.querySelectorAll('.strategy-section ul li');
                guides.skillImprovementList.forEach((skill, i) => {
                    if (skillList[i]) skillList[i].innerHTML = skill;
                });
                
                const competitionTitle = content.querySelectorAll('.strategy-section h3')[1];
                if (competitionTitle) competitionTitle.textContent = guides.competitionTips;
                
                const competitionList = content.querySelectorAll('.strategy-section ul li');
                guides.competitionTipsList.forEach((tip, i) => {
                    if (competitionList[i + 4]) competitionList[i + 4].textContent = tip;
                });
            }
        }
    });
    
    // Update resources section
    const resourcesTitle = document.querySelector('.section-title');
    if (resourcesTitle) {
        resourcesTitle.textContent = guides.usefulResources;
        resourcesTitle.style.transition = 'all 0.3s ease';
    }
    
    const resourceCards = document.querySelectorAll('.resource-card');
    resourceCards.forEach((card, index) => {
        const title = card.querySelector('h3');
        const desc = card.querySelector('p');
        const link = card.querySelector('.resource-link');
        
        // Add animation
        card.style.opacity = '0.7';
        setTimeout(() => {
            card.style.opacity = '1';
        }, index * 50);
        
        if (index === 0) { // Game guides
            if (title) title.textContent = guides.gameGuides;
            if (desc) desc.textContent = guides.gameGuidesDesc;
            if (link) link.textContent = guides.exploreGuides;
        } else if (index === 1) { // Tutorial videos
            if (title) title.textContent = guides.tutorialVideos;
            if (desc) desc.textContent = guides.tutorialVideosDesc;
            if (link) link.textContent = guides.watchVideos;
        } else if (index === 2) { // Player community
            if (title) title.textContent = guides.playerCommunity;
            if (desc) desc.textContent = guides.playerCommunityDesc;
            if (link) link.textContent = guides.joinCommunity;
        } else if (index === 3) { // Game stats
            if (title) title.textContent = guides.gameStats;
            if (desc) desc.textContent = guides.gameStatsDesc;
            if (link) link.textContent = guides.viewStats;
        }
    });
}

// Update reviews page content
function updateReviewsContent(reviews) {
    // Update hero section
    const heroTitle = document.querySelector('.hero-title');
    if (heroTitle) {
        heroTitle.textContent = reviews.title;
        heroTitle.style.transition = 'all 0.3s ease';
    }
    
    const heroDescription = document.querySelector('.hero-description');
    if (heroDescription) {
        heroDescription.textContent = reviews.description;
        heroDescription.style.transition = 'all 0.3s ease';
    }
    
    // Update featured reviews section
    const featuredTitle = document.querySelector('.section-title');
    if (featuredTitle) {
        featuredTitle.textContent = reviews.featuredReviews;
        featuredTitle.style.transition = 'all 0.3s ease';
    }
    
    // Update review cards with animation
    const reviewCards = document.querySelectorAll('.review-card');
    reviewCards.forEach((card, index) => {
        // Add fade effect
        card.style.opacity = '0.7';
        card.style.transform = 'translateY(10px)';
        
        setTimeout(() => {
            card.style.opacity = '1';
            card.style.transform = 'translateY(0)';
        }, index * 150);
        
        const prosTitle = card.querySelector('.pros h4');
        if (prosTitle) prosTitle.textContent = reviews.pros;
        
        const consTitle = card.querySelector('.cons h4');
        if (consTitle) consTitle.textContent = reviews.cons;
        
        const verdict = card.querySelector('.review-verdict strong');
        if (verdict) verdict.textContent = reviews.recommendation;
        
        const playButton = card.querySelector('.btn-play');
        if (playButton) playButton.textContent = reviews.playNow;
    });
    
    // Update categories section
    const categoriesTitle = document.querySelectorAll('.section-title')[1];
    if (categoriesTitle) {
        categoriesTitle.textContent = reviews.reviewCategories;
        categoriesTitle.style.transition = 'all 0.3s ease';
    }
    
    const categoryCards = document.querySelectorAll('.category-card');
    categoryCards.forEach((card, index) => {
        const title = card.querySelector('h3');
        const desc = card.querySelector('p');
        const count = card.querySelector('.category-count');
        
        // Add animation
        card.style.opacity = '0.7';
        setTimeout(() => {
            card.style.opacity = '1';
        }, index * 100);
        
        if (index === 0) { // Action games
            if (title) title.textContent = reviews.actionGames;
            if (desc) desc.textContent = reviews.actionGamesDesc;
            if (count) count.textContent = reviews.actionGamesCount;
        } else if (index === 1) { // Strategy games
            if (title) title.textContent = reviews.strategyGames;
            if (desc) desc.textContent = reviews.strategyGamesDesc;
            if (count) count.textContent = reviews.strategyGamesCount;
        } else if (index === 2) { // Adventure games
            if (title) title.textContent = reviews.adventureGames;
            if (desc) desc.textContent = reviews.adventureGamesDesc;
            if (count) count.textContent = reviews.adventureGamesCount;
        } else if (index === 3) { // Sports games
            if (title) title.textContent = reviews.sportsGames;
            if (desc) desc.textContent = reviews.sportsGamesDesc;
            if (count) count.textContent = reviews.sportsGamesCount;
        }
    });
}

// Update footer
function updateFooter(common) {
    const footerSubtitle = document.querySelector('.logo-subtitle');
    if (footerSubtitle) {
        // Check if we're on test page
        if (window.location.pathname.includes('test-language.html')) {
            const currentLang = document.documentElement.lang;
            footerSubtitle.textContent = currentLang === 'ar' ? 'اختبار نظام اللغة' : 'Language System Test';
        } else if (window.location.pathname.includes('about.html')) {
            const currentLang = document.documentElement.lang;
            footerSubtitle.textContent = currentLang === 'ar' ? 'الألعاب مجانية 100%' : '100% Free Games';
        } else {
            footerSubtitle.textContent = common.footerSubtitle;
        }
    }
    
    const copyright = document.querySelector('.footer-copyright p');
    if (copyright) copyright.textContent = common.footerCopyright;
    
    const description = document.querySelectorAll('.footer-copyright p')[1];
    if (description) {
        // Check if we're on test page
        if (window.location.pathname.includes('test-language.html')) {
            const currentLang = document.documentElement.lang;
            description.textContent = currentLang === 'ar' ? 'صفحة اختبار لنظام تبديل اللغة' : 'Test page for language switching system';
        } else if (window.location.pathname.includes('about.html')) {
            const currentLang = document.documentElement.lang;
            description.textContent = currentLang === 'ar' ? 'موقع متخصص في عرض الألعاب المجانية من جميع المتاجر العالمية' : 'Specialized website for displaying free games from all major gaming stores';
        } else {
            description.textContent = common.footerDescription;
        }
    }
}

// Update language button
function updateLanguageButton(currentLang) {
    const langBtn = document.getElementById('langBtn');
    if (langBtn) {
        const isArabic = currentLang === 'ar';
        
        // Don't update if button is in loading state
        if (langBtn.classList.contains('loading')) {
            return;
        }
        
        langBtn.textContent = isArabic ? 'EN' : 'AR';
        
        // Enhanced styling
        langBtn.style.cssText = `
            background: ${isArabic ? 'rgba(126, 214, 223, 0.2)' : 'rgba(126, 214, 223, 0.3)'};
            border: 1px solid ${isArabic ? 'rgba(126, 214, 223, 0.4)' : 'rgba(126, 214, 223, 0.6)'};
            border-radius: 12px;
            padding: 8px 16px;
            color: var(--text);
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            min-width: 50px;
            text-align: center;
            position: relative;
            overflow: hidden;
        `;
        
        // Add language indicator
        const indicator = document.createElement('span');
        indicator.className = 'lang-indicator';
        indicator.textContent = isArabic ? '🇸🇦' : '🇺🇸';
        indicator.style.cssText = `
            position: absolute;
            top: -2px;
            ${isArabic ? 'right' : 'left'}: -2px;
            font-size: 10px;
            opacity: 0.8;
        `;
        
        // Remove existing indicator
        const existingIndicator = langBtn.querySelector('.lang-indicator');
        if (existingIndicator) {
            existingIndicator.remove();
        }
        
        // Add new indicator
        langBtn.appendChild(indicator);
    }
}

// Initialize language system
function initLanguageSystem() {
    const langBtn = document.getElementById('langBtn');
    if (langBtn) {
        // Load saved language
        const savedLang = localStorage.getItem('games100_language') || 'ar';
        
        // Set initial language
        switchLanguage(savedLang);
        
        // Add click event with improved functionality
        langBtn.addEventListener('click', function(e) {
            e.preventDefault();
            
            const currentLang = document.documentElement.lang;
            const newLang = currentLang === 'ar' ? 'en' : 'ar';
            
            // Add loading state to button
            langBtn.classList.add('loading');
            langBtn.textContent = '';
            langBtn.style.pointerEvents = 'none';
            
            // Save to localStorage
            localStorage.setItem('games100_language', newLang);
            
            // Switch language with a small delay for smooth transition
            setTimeout(() => {
                switchLanguage(newLang);
                
                // Restore button state
                setTimeout(() => {
                    langBtn.classList.remove('loading');
                    langBtn.style.pointerEvents = 'auto';
                }, 500);
            }, 100);
        });
        
        // Add hover effects
        langBtn.addEventListener('mouseenter', function() {
            if (!this.classList.contains('loading')) {
                this.style.transform = 'scale(1.05)';
                this.style.boxShadow = '0 4px 15px rgba(126, 214, 223, 0.3)';
            }
        });
        
        langBtn.addEventListener('mouseleave', function() {
            if (!this.classList.contains('loading')) {
                this.style.transform = 'scale(1)';
                this.style.boxShadow = 'none';
            }
        });
        
        // Add keyboard support
        langBtn.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                this.click();
            }
        });
        
        // Add focus styles
        langBtn.addEventListener('focus', function() {
            if (!this.classList.contains('loading')) {
                this.style.outline = '2px solid var(--accent2)';
                this.style.outlineOffset = '2px';
            }
        });
        
        langBtn.addEventListener('blur', function() {
            this.style.outline = 'none';
        });
    }
}

// Update page meta tags and title
function updatePageMeta(lang) {
    const isArabic = lang === 'ar';
    
    // Update page title
    if (window.location.pathname.includes('guides.html')) {
        document.title = isArabic ? 
            'دليل الألعاب المجانية - Games100 | Gaming Guides' : 
            'Free Games Guide - Games100 | Gaming Guides';
    } else if (window.location.pathname.includes('reviews.html')) {
        document.title = isArabic ? 
            'مراجعات الألعاب المجانية - Games100 | Game Reviews' : 
            'Free Game Reviews - Games100 | Game Reviews';
    } else if (window.location.pathname.includes('test-language.html')) {
        document.title = isArabic ? 
            'اختبار نظام اللغة - Games100' : 
            'Language System Test - Games100';
    } else if (window.location.pathname.includes('about.html')) {
        document.title = isArabic ? 
            'عن الموقع - Games100' : 
            'About Us - Games100';
    }
    
    // Update meta description
    const metaDescription = document.querySelector('meta[name="description"]');
    if (metaDescription) {
        if (window.location.pathname.includes('guides.html')) {
            metaDescription.content = isArabic ? 
                'دليل شامل للألعاب المجانية: كيفية اختيار الألعاب، نصائح للمبتدئين، أفضل الألعاب حسب النوع. Comprehensive gaming guides for free games.' :
                'Comprehensive guide for free games: how to choose games, tips for beginners, best games by genre. دليل شامل للألعاب المجانية.';
        } else if (window.location.pathname.includes('reviews.html')) {
            metaDescription.content = isArabic ? 
                'مراجعات شاملة للألعاب المجانية من Steam, Epic, GOG. تحليل مفصل للعبة، المميزات، العيوب، والتوصيات. Comprehensive game reviews for free games.' :
                'Comprehensive reviews of free games from Steam, Epic, GOG. Detailed game analysis, features, drawbacks, and recommendations. مراجعات شاملة للألعاب المجانية.';
        } else if (window.location.pathname.includes('test-language.html')) {
            metaDescription.content = isArabic ? 
                'صفحة اختبار لنظام تبديل اللغة في موقع Games100. Test page for language switching system.' :
                'Test page for language switching system in Games100 website. صفحة اختبار لنظام تبديل اللغة.';
        } else if (window.location.pathname.includes('about.html')) {
            metaDescription.content = isArabic ? 
                'تعرف على Games100 - موقعك الأول للألعاب المجانية من جميع المتاجر العالمية. Learn about Games100 - your ultimate destination for free games.' :
                'Learn about Games100 - your ultimate destination for free games from all major gaming stores. تعرف على Games100 - موقعك الأول للألعاب المجانية.';
        }
    }
    
    // Update Open Graph title
    const ogTitle = document.querySelector('meta[property="og:title"]');
    if (ogTitle) {
        if (window.location.pathname.includes('guides.html')) {
            ogTitle.content = isArabic ? 'دليل الألعاب المجانية - Games100' : 'Free Games Guide - Games100';
        } else if (window.location.pathname.includes('reviews.html')) {
            ogTitle.content = isArabic ? 'مراجعات الألعاب المجانية - Games100' : 'Free Game Reviews - Games100';
        } else if (window.location.pathname.includes('test-language.html')) {
            ogTitle.content = isArabic ? 'اختبار نظام اللغة - Games100' : 'Language System Test - Games100';
        } else if (window.location.pathname.includes('about.html')) {
            ogTitle.content = isArabic ? 'عن الموقع - Games100' : 'About Us - Games100';
        }
    }
    
    // Update Open Graph description
    const ogDescription = document.querySelector('meta[property="og:description"]');
    if (ogDescription) {
        if (window.location.pathname.includes('guides.html')) {
            ogDescription.content = isArabic ? 'دليل شامل للألعاب المجانية ونصائح مفيدة للاعبين' : 'Comprehensive guide for free games and useful tips for players';
        } else if (window.location.pathname.includes('reviews.html')) {
            ogDescription.content = isArabic ? 'مراجعات شاملة للألعاب المجانية من جميع المتاجر العالمية' : 'Comprehensive reviews of free games from all global stores';
        } else if (window.location.pathname.includes('test-language.html')) {
            ogDescription.content = isArabic ? 'صفحة اختبار لنظام تبديل اللغة' : 'Test page for language switching system';
        } else if (window.location.pathname.includes('about.html')) {
            ogDescription.content = isArabic ? 'تعرف على Games100 - موقعك الأول للألعاب المجانية من جميع المتاجر العالمية' : 'Learn about Games100 - your ultimate destination for free games';
        }
    }
}

// Update page direction and CSS classes
function updatePageDirection(lang) {
    const isArabic = lang === 'ar';
    
    // Add/remove RTL class
    if (isArabic) {
        document.body.classList.add('rtl');
        document.body.classList.remove('ltr');
    } else {
        document.body.classList.add('ltr');
        document.body.classList.remove('rtl');
    }
    
    // Update container direction
    const container = document.querySelector('.container');
    if (container) {
        container.style.direction = isArabic ? 'rtl' : 'ltr';
    }
    
    // Update header direction
    const header = document.querySelector('.header');
    if (header) {
        header.style.direction = isArabic ? 'rtl' : 'ltr';
    }
    
    // Update main content direction
    const main = document.querySelector('main');
    if (main) {
        main.style.direction = isArabic ? 'rtl' : 'ltr';
    }
    
    // Update footer direction
    const footer = document.querySelector('.footer');
    if (footer) {
        footer.style.direction = isArabic ? 'rtl' : 'ltr';
    }
    
    // Update all sections
    const sections = document.querySelectorAll('section');
    sections.forEach(section => {
        section.style.direction = isArabic ? 'rtl' : 'ltr';
    });
    
    // Update all cards
    const cards = document.querySelectorAll('.guide-card, .review-card, .resource-card, .category-card');
    cards.forEach(card => {
        card.style.direction = isArabic ? 'rtl' : 'ltr';
    });
    
    // Update navigation
    const nav = document.querySelector('.header-nav');
    if (nav) {
        nav.style.direction = isArabic ? 'rtl' : 'ltr';
    }
}

// Show language change notification
function showLanguageChangeNotification(lang) {
    const message = lang === 'ar' ? 'تم تغيير اللغة إلى العربية' : 'Language changed to English';
    const icon = lang === 'ar' ? '🇸🇦' : '🇺🇸';
    
    // Create notification element
    const notification = document.createElement('div');
    notification.className = 'language-notification';
    notification.innerHTML = `
        <span style="margin-${lang === 'ar' ? 'left' : 'right'}: 8px; font-size: 16px;">${icon}</span>
        <span>${message}</span>
        <span style="margin-${lang === 'ar' ? 'right' : 'left'}: 8px; opacity: 0.7; font-size: 12px;">${lang === 'ar' ? 'انقر للإغلاق' : 'Click to dismiss'}</span>
    `;
    
    // Style the notification
    notification.style.cssText = `
        position: fixed;
        top: 20px;
        ${lang === 'ar' ? 'right' : 'left'}: 20px;
        background: var(--success, #28a745);
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        font-weight: bold;
        z-index: 10000;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        transform: translateY(-100px);
        transition: transform 0.3s ease;
        font-size: 14px;
        display: flex;
        align-items: center;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        cursor: pointer;
        user-select: none;
    `;
    
    document.body.appendChild(notification);
    
    // Animate in
    setTimeout(() => {
        notification.style.transform = 'translateY(0)';
    }, 100);
    
    // Add click to dismiss functionality
    notification.addEventListener('click', function() {
        this.style.transform = 'translateY(-100px)';
        setTimeout(() => {
            if (this.parentNode) {
                this.remove();
            }
        }, 300);
    });
    
    // Remove after 4 seconds
    setTimeout(() => {
        notification.style.transform = 'translateY(-100px)';
        setTimeout(() => {
            if (notification.parentNode) {
                notification.remove();
            }
        }, 300);
    }, 4000);
}

// Update about page content
function updateAboutContent(about) {
    // Update page title and subtitle
    const pageTitle = document.querySelector('.page-title');
    if (pageTitle) {
        pageTitle.textContent = about.title;
        pageTitle.style.transition = 'all 0.3s ease';
    }
    
    const pageSubtitle = document.querySelector('.page-subtitle');
    if (pageSubtitle) {
        pageSubtitle.textContent = about.subtitle;
        pageSubtitle.style.transition = 'all 0.3s ease';
    }
    
    // Update content sections
    const contentSections = document.querySelectorAll('.content-section');
    contentSections.forEach((section, index) => {
        // Add fade effect
        section.style.opacity = '0.7';
        section.style.transform = 'translateY(10px)';
        
        setTimeout(() => {
            section.style.opacity = '1';
            section.style.transform = 'translateY(0)';
        }, index * 100);
        
        const title = section.querySelector('h2');
        const paragraph = section.querySelector('p');
        const list = section.querySelector('.feature-list');
        
        if (index === 0) { // Mission
            if (title) title.textContent = about.mission;
            if (paragraph) paragraph.textContent = about.missionText;
        } else if (index === 1) { // Vision
            if (title) title.textContent = about.vision;
            if (paragraph) paragraph.textContent = about.visionText;
        } else if (index === 2) { // What makes us special
            if (title) title.textContent = about.whatMakesUsSpecial;
            if (list) {
                const listItems = list.querySelectorAll('li');
                about.features.forEach((feature, i) => {
                    if (listItems[i]) listItems[i].textContent = feature;
                });
            }
        } else if (index === 3) { // Our Journey
            if (title) title.textContent = about.ourJourney;
            
            const timelineItems = section.querySelectorAll('.timeline-item');
            if (timelineItems.length >= 2) {
                // First timeline item
                const firstDate = timelineItems[0].querySelector('.timeline-date');
                const firstTitle = timelineItems[0].querySelector('h3');
                const firstText = timelineItems[0].querySelector('p');
                
                if (firstDate) firstDate.textContent = '2024';
                if (firstTitle) firstTitle.textContent = about.websiteLaunch;
                if (firstText) firstText.textContent = about.websiteLaunchText;
                
                // Second timeline item
                const secondDate = timelineItems[1].querySelector('.timeline-date');
                const secondTitle = timelineItems[1].querySelector('h3');
                const secondText = timelineItems[1].querySelector('p');
                
                if (secondDate) secondDate.textContent = about.future;
                if (secondTitle) secondTitle.textContent = about.plannedExpansions;
                if (secondText) secondText.textContent = about.plannedExpansionsText;
            }
        } else if (index === 4) { // Statistics
            if (title) title.textContent = about.ourStatistics;
            
            const statCards = section.querySelectorAll('.stat-card');
            if (statCards.length >= 4) {
                const labels = [
                    about.supportedStores,
                    about.free,
                    about.continuousUpdates,
                    about.supportedLanguages
                ];
                
                statCards.forEach((card, i) => {
                    const label = card.querySelector('.stat-label');
                    if (label && labels[i]) label.textContent = labels[i];
                });
            }
        }
    });
    
    // Update footer sections
    const footerSections = document.querySelectorAll('.footer-section');
    footerSections.forEach((section, index) => {
        const title = section.querySelector('.footer-title');
        const links = section.querySelectorAll('.footer-links a');
        
        if (index === 0) { // Site Information
            if (title) title.textContent = about.siteInformation;
            if (links.length >= 5) {
                links[0].textContent = about.title;
                links[1].textContent = about.privacyPolicy;
                links[2].textContent = about.termsOfUse;
                links[3].textContent = about.contactUs;
                links[4].textContent = about.sitemap;
            }
        } else if (index === 1) { // Supported Stores
            if (title) title.textContent = about.supportedStoresTitle;
        } else if (index === 2) { // Site Statistics
            if (title) title.textContent = about.siteStatistics;
            
            const statItems = section.querySelectorAll('.stat-item .stat-label');
            if (statItems.length >= 3) {
                statItems[0].textContent = about.free;
                statItems[1].textContent = about.stores;
                statItems[2].textContent = about.updates;
            }
        }
    });
    
    // Update footer bottom
    const footerSubtitle = document.querySelector('.footer-bottom .logo-subtitle');
    if (footerSubtitle) footerSubtitle.textContent = about.footerSubtitle;
    
    const footerDesc = document.querySelectorAll('.footer-copyright p')[1];
    if (footerDesc) footerDesc.textContent = about.footerDescription;
}

// Update test page content
function updateTestPageContent(lang) {
    const isArabic = lang === 'ar';
    
    // Update hero section with animation
    const heroTitle = document.querySelector('.hero-title');
    if (heroTitle) {
        heroTitle.style.opacity = '0.7';
        heroTitle.style.transform = 'translateY(10px)';
        heroTitle.textContent = isArabic ? 'اختبار نظام اللغة' : 'Language System Test';
        setTimeout(() => {
            heroTitle.style.opacity = '1';
            heroTitle.style.transform = 'translateY(0)';
        }, 200);
    }
    
    const heroDescription = document.querySelector('.hero-description');
    if (heroDescription) {
        heroDescription.style.opacity = '0.7';
        heroDescription.textContent = isArabic ? 
            'هذه الصفحة لاختبار نظام تبديل اللغة. جرب الضغط على زر اللغة لرؤية التغييرات.' :
            'This page is for testing the language switching system. Try clicking the language button to see the changes.';
        setTimeout(() => {
            heroDescription.style.opacity = '1';
        }, 300);
    }
    
    // Update section title
    const sectionTitle = document.querySelector('.section-title');
    if (sectionTitle) {
        sectionTitle.style.opacity = '0.7';
        sectionTitle.textContent = isArabic ? 'محتوى تجريبي' : 'Test Content';
        setTimeout(() => {
            sectionTitle.style.opacity = '1';
        }, 400);
    }
    
    // Update guide card with animation
    const guideCard = document.querySelector('.guide-card');
    if (guideCard) {
        guideCard.style.opacity = '0.7';
        guideCard.style.transform = 'translateY(10px)';
        
        const guideTitle = guideCard.querySelector('.guide-title');
        if (guideTitle) {
            guideTitle.textContent = isArabic ? 'عنوان تجريبي' : 'Test Title';
        }
        
        const guideContent = guideCard.querySelector('.guide-content p');
        if (guideContent) {
            guideContent.textContent = isArabic ? 
                'هذا محتوى تجريبي لاختبار نظام الترجمة. يجب أن يتغير هذا النص عند تبديل اللغة.' :
                'This is test content for testing the translation system. This text should change when switching languages.';
        }
        
        // Update list items
        const listItems = guideCard.querySelectorAll('.guide-content ul li');
        if (listItems.length >= 3) {
            listItems[0].textContent = isArabic ? 'عنصر تجريبي 1' : 'Test Item 1';
            listItems[1].textContent = isArabic ? 'عنصر تجريبي 2' : 'Test Item 2';
            listItems[2].textContent = isArabic ? 'عنصر تجريبي 3' : 'Test Item 3';
        }
        
        setTimeout(() => {
            guideCard.style.opacity = '1';
            guideCard.style.transform = 'translateY(0)';
        }, 500);
    }
    
    // Update footer
    const footerSubtitle = document.querySelector('.logo-subtitle');
    if (footerSubtitle) {
        footerSubtitle.textContent = isArabic ? 'اختبار نظام اللغة' : 'Language System Test';
    }
    
    const footerDesc = document.querySelectorAll('.footer-copyright p')[1];
    if (footerDesc) {
        footerDesc.textContent = isArabic ? 'صفحة اختبار لنظام تبديل اللغة' : 'Test page for language switching system';
    }
}

// Initialize when DOM is loaded
document.addEventListener('DOMContentLoaded', initLanguageSystem); 